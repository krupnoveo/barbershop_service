# Сервис барбершопов (Barbershop Service)

## Обзор
Сервис барбершопов - это микросервис, отвечающий за управление барбершопами и их услугами в приложении Barbershop. Он обрабатывает создание, обновление, получение и удаление барбершопов и услуг.

## Функциональность
- Управление барбершопами (создание, обновление, получение, удаление)
- Управление услугами барбершопов (стрижки, уходовые процедуры и т.д.)
- Хранение и получение фотографий барбершопов
- Поддержка геолокации (широта и долгота)

## Технологический стек
- Java 21
- Spring Boot 3.x
- Spring Data JPA
- PostgreSQL
- Liquibase (для миграций базы данных)
- AWS S3 (Yandex Cloud S3-совместимое хранилище для фотографий барбершопов)

## API Endpoints
Сервис предоставляет RESTful API для:
- Управления барбершопами
- Управления услугами барбершопов
- Управления фотографиями

## Конфигурация
Сервис использует следующую конфигурацию:
- База данных: PostgreSQL
- Обнаружение сервисов: Eureka
- Объектное хранилище: S3-совместимое хранилище (Yandex Cloud)

## Зависимости
- Eureka Server: Регистрация и обнаружение сервисов
- PostgreSQL: Хранение данных барбершопов
- Gateway: Маршрутизация API

## Разработка
Для локального запуска сервиса:

1. Убедитесь, что PostgreSQL работает и создана база данных `barbershop_db`
2. Примените миграции Liquibase
3. Установите необходимые переменные окружения (см. файл `.env`)
4. Запустите приложение: `./gradlew bootRun`

## Docker
Сервис можно развернуть с помощью Docker. Для этого необходимо скачать образ из Docker Hub и запустить командой:
```bash
docker run -p 8081:8081 --env-file .env krupnoveo/barbershop_with_microservices_barbershop-service
```

## Переменные окружения
- `barbershop.service.name`: Имя сервиса для регистрации в Eureka
- `barbershop.service.port`: Порт, на котором работает сервис
- `postgres.host`: Хост PostgreSQL
- `postgres.port`: Порт PostgreSQL
- `DB_USER`: Имя пользователя базы данных
- `DB_PASSWORD`: Пароль базы данных
- `ACCESS_KEY`: Ключ доступа S3
- `SECRET_KEY`: Секретный ключ S3
- `eureka.service.host`: Хост Eureka сервера
- `eureka.service.port`: Порт Eureka сервера 